<div class="container-fluid">
  <!-- Contador de Ordens de Serviço -->
  <div class="contador-os text-center mb-3">
    <span 
      class="badge" 
      [ngClass]="{
        'bg-primary': statusOrdem === 'Pendente',
        'bg-success': statusOrdem === 'CONCLUIDA'
      }">
      {{ ordensFiltradas.length }} 
      {{ statusOrdem === 'Pendente' ? 'Ordem(ns) Pendente(s)' : 'Ordem(ns) Realizada(s)' }}
    </span>
  </div>

  <!-- Título da Seção -->
  <h1 class="text-center mb-4">
    {{ statusOrdem === 'Pendente' ? 'Ordens de Serviço Pendentes' : 'Ordens de Serviço Realizadas' }}
  </h1>

  <!-- Grade de Ordens de Serviço -->
  <div class="d-flex justify-content-center">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 justify-content-center">
      <div class="col" *ngFor="let os of ordensFiltradas">
        <div class="card h-100 ordem-servico-card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <strong class="codigo">{{ os.numeroOrdemDeServico }}</strong>
          </div>
          <div class="card-body">
            <!-- Informações do Cliente -->
            <p class="card-text cliente mb-2">
              <i class="fas fa-user me-2"></i>
              {{ os.clienteData?.nomeCliente || 'Carregando...' }}
            </p>

            <!-- Endereço -->
            <p class="card-text endereco mb-2">
              <i class="fas fa-map-marker-alt me-2"></i>
              {{ formatarEndereco(os.clienteData?.endereco) || 'Carregando endereço...' }}
            </p>

            <!-- Botão para Abrir Rota no Maps -->
            <button 
              class="btn btn-outline-secondary btn-sm mb-2 w-100" 
              (click)="abrirRota(formatarEnderecoParaMaps(os.clienteData?.endereco))"
              [disabled]="!os.clienteData?.endereco">
              <i class="fas fa-route me-2"></i>
              Abrir Rota no Maps
            </button>

            <!-- Tipo de Serviço -->
            <p class="card-text tipo mb-2">
              <i class="fas fa-tools me-2"></i>
              {{ os.tipoServico }}
            </p>

            <!-- Observações (se existirem) -->
            <p class="card-text" *ngIf="os.observacoesReparo">
              <i class="fas fa-comment me-2"></i>
              {{ os.observacoesReparo }}
            </p>
          </div>

          <!-- Rodapé do Card (Ações ou Status) -->
          <div class="card-footer text-center">
            <button 
              *ngIf="statusOrdem === 'Pendente'"
              class="btn btn-primary w-100"
              [disabled]="pausaAtiva || !os.ordemDeServicoId"
              (click)="iniciarOrdemServico(os)">
              Iniciar
              <small *ngIf="pausaAtiva" class="d-block pausa-msg">
                (Finalize a pausa primeiro)
              </small>
            </button>
            <span *ngIf="statusOrdem === 'CONCLUIDA'" class="badge bg-success">
              Concluída
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mensagem de Nenhum Resultado -->
  <div *ngIf="ordensFiltradas.length === 0" class="alert alert-info text-center mt-4">
    Nenhuma ordem de serviço {{ statusOrdem === 'Pendente' ? 'Pendente' : 'realizada' }} encontrada.
  </div>
</div>